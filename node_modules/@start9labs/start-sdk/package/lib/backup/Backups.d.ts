import * as T from "../../../base/lib/types";
import { Affine } from "../util";
import { InitKind, InitScript } from "../../../base/lib/inits";
export declare const DEFAULT_OPTIONS: T.SyncOptions;
export type BackupSync<Volumes extends string> = {
    dataPath: `/media/startos/volumes/${Volumes}/${string}`;
    backupPath: `/media/startos/backup/${string}`;
    options?: Partial<T.SyncOptions>;
    backupOptions?: Partial<T.SyncOptions>;
    restoreOptions?: Partial<T.SyncOptions>;
};
export type BackupEffects = T.Effects & Affine<"Backups">;
export declare class Backups<M extends T.SDKManifest> implements InitScript {
    private options;
    private restoreOptions;
    private backupOptions;
    private backupSet;
    private preBackup;
    private postBackup;
    private preRestore;
    private postRestore;
    private constructor();
    static ofVolumes<M extends T.SDKManifest = never>(...volumeNames: Array<M["volumes"][number]>): Backups<M>;
    static ofSyncs<M extends T.SDKManifest = never>(...syncs: BackupSync<M["volumes"][number]>[]): Backups<M>;
    static withOptions<M extends T.SDKManifest = never>(options?: Partial<T.SyncOptions>): Backups<M>;
    setOptions(options?: Partial<T.SyncOptions>): this;
    setBackupOptions(options?: Partial<T.SyncOptions>): this;
    setRestoreOptions(options?: Partial<T.SyncOptions>): this;
    setPreBackup(fn: (effects: BackupEffects) => Promise<void>): this;
    setPostBackup(fn: (effects: BackupEffects) => Promise<void>): this;
    setPreRestore(fn: (effects: BackupEffects) => Promise<void>): this;
    setPostRestore(fn: (effects: BackupEffects) => Promise<void>): this;
    addVolume(volume: M["volumes"][number], options?: Partial<{
        options: T.SyncOptions;
        backupOptions: T.SyncOptions;
        restoreOptions: T.SyncOptions;
    }>): this;
    addSync(sync: BackupSync<M["volumes"][0]>): this;
    createBackup(effects: T.Effects): Promise<void>;
    init(effects: T.Effects, kind: InitKind): Promise<void>;
    restoreBackup(effects: T.Effects): Promise<void>;
}
