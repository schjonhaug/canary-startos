"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.WithRetry = void 0;
class WithRetry {
    parent;
    defaultValue;
    description;
    constructor(parent, defaultValue, description = {
        name: "WithRetry",
        children: [parent],
        extras: [defaultValue],
    }) {
        this.parent = parent;
        this.defaultValue = defaultValue;
        this.description = description;
    }
    parse(a, onParse) {
        const parentCheck = this.parent.enumParsed(a);
        if ("error" in parentCheck) {
            const parentCheckTwice = this.parent.enumParsed(this.defaultValue(a));
            if ("error" in parentCheckTwice)
                return onParse.invalid(parentCheck.error);
            return onParse.parsed(parentCheckTwice.value);
        }
        return onParse.parsed(parentCheck.value);
    }
}
exports.WithRetry = WithRetry;
//# sourceMappingURL=with-retry.js.map